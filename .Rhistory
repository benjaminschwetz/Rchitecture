zeeguu_path <- paste0(temp_folder, "/zeeguu_api")
git2r::clone(url = "https://github.com/zeeguu-ecosystem/Zeeguu-API.git",
local_path  = zeeguu_path)
folder_contents <- content_table(zeeguu_path, include_folders = FALSE)
folder_contents %>%
mutate(
file_type = fct_infreq(file_type)
) %>%
group_by(file_type) %>%
summarise(
n_files = n_distinct(file_name),
file_size_sum = sum(size, na.rm = TRUE),
file_size_mean = mean(size),
file_size_median = median(size),
file_size_min = min(size, na.rm = TRUE),
file_size_max = max(size, na.rm = TRUE)
) %>%
mutate_if(is.numeric,round)
folder_tree <- data.tree::as.Node(data.frame(pathString = list.dirs(zeeguu_path, recursive = TRUE)))
plot(folder_tree)
data.tree::as.Node(folder_contents)
?data.tree::as.Node(folder_contents)
data.tree::as.Node(folder_contents,pathName="file_name")
x <- data.tree::as.Node(folder_contents,pathName="file_name")
plot(x)
folder_contents
View(folder_contents)
x <- data.tree::as.Node(folder_contents,pathName="path")
x
print(x, "file_type")
devtools::load_all()
devtools::load_all()
debug(visualize_folder_type_and_size)
visualize_folder_type_and_size(zeeguu_path)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path)
?data.tree::Aggregate()
tree$Climb(3)
tree$Climb(position=3)
print(tree)
tree$children
length(tree$children)
lengths(tree$children)
tree$height
tree$count
tree$isLeaf
tree$leafCount
?Aggregate
tree$Do(function(x) {
x$n_children <- Aggregate(node = x,
attribute = "file_type",
aggFun = paste_collapse)
},
traversal = "post-order")
paste_collapse <- purrr::partial(paste, collapse= ", ")
tree$Do(function(x) {
x$n_children <- Aggregate(node = x,
attribute = "file_type",
aggFun = paste_collapse)
},
traversal = "post-order")
print(tree, "n_childre")
print(tree, "n_children")
print(tree, "n_children", limit = 20)
graph <- data.tree::as.igraph.Node(tree)
?data.tree::as.Node
data.tree::AreNamesUnique(tree)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path)
graph <- data.tree::as.igraph.Node(tree_unique)
tree_unique
names(tree$children)
names(tree$Children)
debug(make_names_unique)
tree_unique <- make_names_unique(tree)
l$children
names(l$children)
visualize_folder_type_and_size(zeeguu_path)
tree$root
names(tree$root)
tree$root$name
tree$root$name <- "foo"
data.tree::Get(tree, "name")
data.tree::Get(tree$root, "name")
tree$Get("name")
tree$Get("path")
x <- tree$Get("path")
purrr::map_chr(x, ~paste(.x, collapse = "/"))
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path)
graph <- data.tree::as.igraph.Node(tree_unique, directed = TRUE)
visualize_folder_type_and_size(zeeguu_path)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path)
visualize_folder_type_and_size(zeeguu_path)
graph
graph
debug(visualize_folder_type_and_size)
visualize_folder_type_and_size(zeeguu_path)
graph
tidygraph::as_tbl_graph(graph)
igraph_graph <- data.tree::as.igraph.Node(tree_unique, directed = TRUE)
tbl_graph <- tidygraph::as_tbl_graph(graph) %>%
tidygraph::activate("nodes") %>%
dplyr::left_join(folder_contents,
by = c("name" = "path"))
View(tbl_graph)
tbl_graph
tbl_graph %>% as.data.frame()
View(folder_contents)
folder_contents <- content_table(zeeguu_path, include_folders = FALSE) %>%
mutate(path = stringr::str_replace_all("/+", "/"))
visualize_folder_type_and_size(zeeguu_path)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path)
tbl_graph %>% as_tibble( ) %>% View()
tbl_graph %>% as_tibble( ) %>% View()
View(folder_contents)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path)
tbl_graph %>% as_tibble( ) %>% View()
?dplyr::recode
tbl_graph <- tidygraph::as_tbl_graph(igraph_graph) %>%
tidygraph::activate("nodes") %>%
dplyr::left_join(folder_contents,
by = c("name" = "path")) %>%
dplyr::mutate(
isdir = tidyr::replace_na(TRUE)
)
tbl_graph %>% as_tibble( ) %>% View()
tbl_graph <- tidygraph::as_tbl_graph(igraph_graph) %>%
tidygraph::activate("nodes") %>%
dplyr::left_join(folder_contents,
by = c("name" = "path")) %>%
dplyr::mutate(
isdir = tidyr::replace_na(TRUE)
) %>%
dplyr::mutate(
degree = tidygraph::centrality_degree()
)
tbl_graph %>% as_tibble( ) %>% View()
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path)
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
tbl_graph %>% as_tibble( ) %>% View()
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
tbl_graph %>% as_tibble( ) %>% View()
# get all the subgraphs for every directory at depth
# aggregate subfiles
ggraph::ggraph(tbl_graph, 'circlepack', weight = size) +
ggraph::geom_node_circle(aes(fill = depth)) +
ggplot2::coord_fixed() +
ggplot2::theme_void()
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
View(size_data)
size_data %>% dplyr::filter(name = "zeeguu_api")
size_data %>% dplyr::filter(name == "zeeguu_api")
tree$Do(function(x) {
x$size <- Aggregate(node = x,
attribute = "size",
aggFun = sum)
},
traversal = "post-order")
tree_unique <- make_names_unique(tree)
size_data <- data.tree::ToDataFrameTable(tree_unique, "name", "size")
size_data %>% dplyr::filter(name == "zeeguu_api")
tree$Do(function(x) {
x$size <- Aggregate(node = x,
attribute = "size",
aggFun = sum)
},
traversal = "post-order")
tree_unique <- make_names_unique(tree)
size_data <- data.tree::ToDataFrameTable(tree_unique, "name", "size")
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
?ToDataFrameTable
size_data <- data.tree::ToDataFrameTree(tree_unique, "name", "size")
size_data %>% dplyr::filter(name == "zeeguu_api")
tbl_graph <- tidygraph::as_tbl_graph(igraph_graph) %>%
tidygraph::activate("nodes") %>%
dplyr::left_join(folder_contents,
by = c("name" = "path")) %>%
dplyr::left_join(size_data) %>%
dplyr::mutate(
isdir = tidyr::replace_na(isdir, TRUE)
)
tbl_graph %>% as_tibble( ) %>% View()
tbl_graph <- tidygraph::as_tbl_graph(igraph_graph) %>%
tidygraph::activate("nodes") %>%
dplyr::left_join(folder_contents,
by = c("name" = "path")) %>%
dplyr::left_join(size_data) %>%
dplyr::mutate(
isdir = tidyr::replace_na(isdir, TRUE)
)
tbl_graph <- tidygraph::as_tbl_graph(igraph_graph) %>%
tidygraph::activate("nodes") %>%
dplyr::left_join(folder_contents,
by = c("name" = "path")) %>%
dplyr::left_join(size_data, by = "name") %>%
dplyr::mutate(
isdir = tidyr::replace_na(isdir, TRUE)
)
tbl_graph %>% as_tibble( ) %>% View()
?dplyr::coalesce
tbl_graph <- tidygraph::as_tbl_graph(igraph_graph) %>%
tidygraph::activate("nodes") %>%
dplyr::left_join(folder_contents,
by = c("name" = "path")) %>%
dplyr::left_join(size_data, by = "name") %>%
dplyr::transmute(
name,
isdir = tidyr::replace_na(isdir, TRUE),
size = size.y,
file_name,
file_type
)
tbl_graph <- tidygraph::as_tbl_graph(igraph_graph) %>%
tidygraph::activate("nodes") %>%
dplyr::left_join(folder_contents,
by = c("name" = "path")) %>%
dplyr::left_join(size_data, by = "name") %>%
dplyr::mutate(
name,
isdir = tidyr::replace_na(isdir, TRUE),
size = size.y,
file_name,
file_type
)
tbl_graph <- tidygraph::as_tbl_graph(igraph_graph) %>%
tidygraph::activate("nodes") %>%
dplyr::left_join(folder_contents,
by = c("name" = "path")) %>%
dplyr::mutate(
isdir = tidyr::replace_na(isdir, TRUE)
)
# get all the subgraphs for every directory at depth
# aggregate subfiles
ggraph::ggraph(tbl_graph, 'circlepack', weight = size) +
ggraph::geom_node_circle(aes(fill = depth)) +
ggplot2::coord_fixed() +
ggplot2::theme_void()
tbl_graph %>% as_tibble( ) %>% View()
tbl_graph <- tidygraph::as_tbl_graph(igraph_graph) %>%
tidygraph::activate("nodes") %>%
dplyr::left_join(folder_contents,
by = c("name" = "path")) %>%
dplyr::left_join(size_data, by = "name")
tbl_graph %>% as_tibble( ) %>% View()
tbl_graph %>% as_tibble( ) %>% filter(name == "zeeguu_api")
tbl_graph <- tidygraph::as_tbl_graph(igraph_graph) %>%
tidygraph::activate("nodes") %>%
dplyr::left_join(folder_contents,
by = c("name" = "path")) %>%
dplyr::left_join(size_data, by = "name") %>%
dplyr::mutate(
isdir = tidyr::replace_na(isdir, TRUE)
) %>%
select(-size.x, size = size.y)
tbl_graph %>% as_tibble( ) %>% filter(name == "zeeguu_api")
# get all the subgraphs for every directory at depth
# aggregate subfiles
ggraph::ggraph(tbl_graph, 'circlepack', weight = size) +
ggraph::geom_node_circle(aes(fill = depth)) +
ggplot2::coord_fixed() +
ggplot2::theme_void()
tbl_graph %>% as_tibble() %>% View()
# get all the subgraphs for every directory at depth
# aggregate subfiles
ggraph::ggraph(tbl_graph, 'circlepack', weight = size) +
ggraph::geom_node_circle(aes(fill = depth)) +
ggplot2::coord_fixed() +
ggplot2::theme_void()
dplyr::mutate(
isdir = tidyr::replace_na(isdir, TRUE)
size = size + 1 # zero weights cannot be plotted
) %>%
# get all the subgraphs for every directory at depth
# aggregate subfiles
ggraph::ggraph(tbl_graph, 'circlepack', weight = size) +
ggraph::geom_node_circle(aes(fill = depth)) +
ggplot2::coord_fixed() +
ggplot2::theme_void()
tbl_graph <- tidygraph::as_tbl_graph(igraph_graph) %>%
tidygraph::activate("nodes") %>%
dplyr::left_join(folder_contents,
by = c("name" = "path")) %>%
dplyr::mutate(
isdir = tidyr::replace_na(isdir, TRUE)
)
# get all the subgraphs for every directory at depth
# aggregate subfiles
ggraph::ggraph(tbl_graph, 'circlepack', weight = size) +
ggraph::geom_node_circle(aes(fill = depth)) +
ggplot2::coord_fixed() +
ggplot2::theme_void()
tbl_graph <- tidygraph::as_tbl_graph(igraph_graph) %>%
tidygraph::activate("nodes") %>%
dplyr::left_join(folder_contents,
by = c("name" = "path")) %>%
dplyr::mutate(
isdir = tidyr::replace_na(isdir, TRUE)
)
# get all the subgraphs for every directory at depth
# aggregate subfiles
ggraph::ggraph(tbl_graph, 'circlepack', weight = size) +
ggraph::geom_node_circle(aes(fill = depth)) +
ggplot2::coord_fixed() +
ggplot2::theme_void()
tbl_graph
n
n
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
tbl_graph <- tidygraph::as_tbl_graph(igraph_graph) %>%
tidygraph::activate("nodes") %>%
dplyr::left_join(folder_contents,
by = c("name" = "path")) %>%
dplyr::left_join(size_data, by = "name") %>%
select(-size.x, size = size.y) %>%
dplyr::mutate(
isdir = tidyr::replace_na(isdir, TRUE),
size = size + 1 # zero weights cannot be plotted
) %>%
# get all the subgraphs for every directory at depth
# aggregate subfiles
ggraph::ggraph(tbl_graph, 'circlepack', weight = size) +
ggraph::geom_node_circle(aes(fill = depth)) +
ggplot2::coord_fixed() +
ggplot2::theme_void()
devtools::load_all()
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
devtools::load_all()
?switch
?case_when
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
x
unique(x$Get("file_type"))
ifelse(n_vals == 0, NA_character_,
ifelse(n_vals == 1, unique(x),
"mixed"))
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
View(size_data)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
View(size_data)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
?ggraph::geom_node_circle
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
?ggplot2::scale_color_brewer
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
?ggplot2::scale_color_brewer
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
# get all the subgraphs for every directory at depth
# aggregate subfiles
tbl_graph %>%
tidygraph::filter(isdir) %>%
ggraph::ggraph('circlepack', weight = size) +
ggraph::geom_node_circle(aes(fill = content_type)) +
ggraph::geom_node_text(aes(label = name, filter = depth == 2))+
ggplot2::coord_fixed() +
ggplot2::theme_void() +
ggplot2::scale_fill_brewer(type = "qual")
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
?ggraph::layout_as_backbone
??layout_as_backbone
devtools::load_all()
??layout_as_backbone
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
??layout_as_backbone
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
# get all the subgraphs for every directory at depth
# aggregate subfiles
tbl_graph %>%
tidygraph::filter(isdir) %>%
ggraph::ggraph('circlepack', weight = size) +
ggraph::geom_node_circle(aes(fill = content_type)) +
ggraph::geom_node_text(aes(label = name, filter = depth == 1), repel = TRUE, check_overlap = TRUE)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
View(folder_contents)
debug(visualize_folder_type_and_size)
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
tbl_graph %>% as_tibble() %>% View()
tbl_graph %>% as_tibble() %>% View()
tbl_graph %>% as_tibble() %>% View()
# get all the subgraphs for every directory at depth
# aggregate subfiles
tbl_graph %>%
tidygraph::filter(isdir) %>%
ggraph::ggraph('circlepack', weight = size) +
ggraph::geom_node_circle(aes(fill = content_type)) +
ggraph::geom_node_label(aes(label = name, filter = depth == 1), repel = TRUE, check_overlap = TRUE, alpha=0.5)+
ggplot2::coord_fixed() +
ggplot2::theme_void() +
ggplot2::scale_fill_brewer(type = "qual")
size_data <- data.tree::ToDataFrameTree(tree_unique, "name", "size", "content_type", "short_name")
# get all the subgraphs for every directory at depth
# aggregate subfiles
tbl_graph %>%
tidygraph::filter(isdir) %>%
ggraph::ggraph('circlepack', weight = size) +
ggraph::geom_node_circle(aes(fill = content_type)) +
ggraph::geom_node_label(aes(label = short_name, filter = depth == 1), repel = TRUE, check_overlap = TRUE, alpha=0.5)+
ggplot2::coord_fixed() +
ggplot2::theme_void() +
ggplot2::scale_fill_brewer(type = "qual")
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
?ggraph::geom_label
?ggraph::geom_node_label
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
devtools::load_all()
visualize_folder_type_and_size(zeeguu_path, path_prefix = temp_folder)
